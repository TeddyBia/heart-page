<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Emoji + Options</title>
  <style>
    :root { --gap: 12px; --pad: 12px; }

    body {
      margin: 0;
      min-height: 100svh;
      display: grid;
      place-items: center;
      background: #ffc0cb;            /* H·ªíNG */
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: #1b1b1b;
    }

    /* B·ªçc header + stage ƒë·ªÉ x·∫øp d·ªçc, canh gi·ªØa */
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 14px;
      padding: 10px;
      text-align: center;
    }

    .headline {
      margin: 0;
      font-weight: 800;
      letter-spacing: .2px;
      font-size: clamp(18px, 3.5vw, 28px);
    }

    /* Khung hi·ªÉn th·ªã GIF */
    .stage {
      position: relative;
      width: min(92vw, 460px);
      aspect-ratio: 1 / 1;           /* vu√¥ng, gi·ªØ t·ªâ l·ªá ·ªïn ƒë·ªãnh */
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      background: #000;
      user-select: none;
      touch-action: manipulation;
    }

    .stage img.emoji {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      pointer-events: none;           /* ·∫£nh kh√¥ng ch·∫∑n s·ª± ki·ªán chu·ªôt */
    }

    /* Thanh ƒëi·ªÅu khi·ªÉn ban ƒë·∫ßu: 2 option n·∫±m ngang */
    .controls {
      position: absolute;
      left: 50%;
      bottom: var(--pad);
      transform: translateX(-50%);
      display: flex;
      gap: var(--gap);
      z-index: 2;
    }

    .btn, .link-btn {
      appearance: none;
      border: none;
      text-decoration: none;
      padding: 10px 14px;
      border-radius: 999px;
      background: #22c55e;           /* XANH L√Å */
      color: #fff;
      font-weight: 700;
      letter-spacing: .2px;
      box-shadow: 0 4px 14px rgba(0,0,0,.2);
      transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
      cursor: pointer;
      white-space: nowrap;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }

    .btn:hover, .link-btn:hover {
      background: #16a34a;           /* Xanh l√° ƒë·∫≠m h∆°n khi hover */
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(0,0,0,.28);
    }

    /* Khi Option 1 chuy·ªÉn sang ch·∫ø ƒë·ªô "bay" trong khung gif */
    .floating {
      position: absolute;
      z-index: 3;
      transition: left .14s ease, top .14s ease, transform .14s ease;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- TI√äU ƒê·ªÄ N·∫∞M TR√äN GIF -->
    <h1 class="headline">Tr√∫c L√¢m Nh√£ c√≥ cute s1tg hogggg üòç</h1>

    <div class="stage" id="stage" aria-label="Khu v·ª±c emoji">
      <img src=".https://github.com/TeddyBia/heart-page/tree/main/img/1.gif" alt="Emoji GIF" class="emoji" />

      <div class="controls" id="controls">
        <button id="opt1" class="btn">Hemmmmmmmm ü•∫</button>
        <a id="opt2" class="link-btn" href="https://teddybia.github.io/heart-page/moah2.html" rel="noopener">√ùeeeeeeeeeeeeee üòò</a>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const stage   = document.getElementById('stage');
      const controls= document.getElementById('controls');
      const opt1    = document.getElementById('opt1');
      const opt2    = document.getElementById('opt2');

      let isFloating = false;

      function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

      function randomPositionWithin(container, el) {
        const cRect = container.getBoundingClientRect();
        const eRect = el.getBoundingClientRect();

        const pad = 8; // c√°ch bi√™n 1 ch√∫t
        const maxLeft = Math.max(0, cRect.width  - eRect.width  - pad);
        const maxTop  = Math.max(0, cRect.height - eRect.height - pad);

        const left = clamp(Math.random() * maxLeft, pad, maxLeft);
        const top  = clamp(Math.random() * maxTop,  pad, maxTop);

        el.style.left = left + 'px';
        el.style.top  = top  + 'px';
      }

      function beginFloating() {
        if (!isFloating) {
          isFloating = true;
          stage.appendChild(opt1);
          opt1.classList.add('floating');
          randomPositionWithin(stage, opt1);
        }
      }

      function dodge() {
        beginFloating();
        randomPositionWithin(stage, opt1);
      }

      // N√© khi s·∫Øp click ho·∫∑c ch·∫°m
      opt1.addEventListener('pointerdown', (e) => { e.preventDefault(); e.stopPropagation(); dodge(); });
      opt1.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); });
      opt1.addEventListener('mouseenter', dodge);
      opt1.addEventListener('touchstart', (e) => { e.preventDefault(); dodge(); }, { passive: false });

      // N√© khi con tr·ªè ti·∫øn qu√° g·∫ßn
      stage.addEventListener('mousemove', (e) => {
        if (!isFloating) return;

        const sRect = stage.getBoundingClientRect();
        const bRect = opt1.getBoundingClientRect();

        const cursorX = e.clientX - sRect.left;
        const cursorY = e.clientY - sRect.top;

        const btnCenterX = (bRect.left - sRect.left) + bRect.width / 2;
        const btnCenterY = (bRect.top  - sRect.top)  + bRect.height / 2;

        const dx = cursorX - btnCenterX;
        const dy = cursorY - btnCenterY;
        const dist = Math.hypot(dx, dy);

        const safeRadius = 90; // kho·∫£ng an to√†n
        if (dist < safeRadius) {
          dodge();
        }
      });
    })();
  </script>
</body>
</html>
